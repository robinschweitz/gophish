function setupTeamOptions(){if(0===teams.length)return modalError("No teams found!"),!1;var e=$.map(teams,(function(e){return e.text=e.name,e}));$("#team.form-control").select2({placeholder:"Select Teams",data:e})}function CheckTeam(e,a){var t=!1,s=!1;return e.forEach((e=>{const o=e.users.find((e=>e.id===a.id));if(o)switch(o.role.slug){case"team_admin":console.log(`User is a Team Admin in team ${e.id}`),t=!0,s=!0;break;case"contributor":console.log(`User is a Contributor in team ${e.id}`),s=!0;break;case"viewer":console.log(`User is a Viewer in team ${e.id}`);break;default:console.log(`Group ${group.user_id} has an unknown role in team ${e.id}`)}else console.log(`Group ${group.user_id} is in team ${e.id} with no specified role`)})),[t,s]}function addTeam(e){var a=[escapeHtml(e.text),escapeHtml(e.id),'<span style="cursor:pointer;"><i class="fa fa-trash-o"></i></span>'],t=teamTable.column(1,{order:"index"}).data().indexOf(e.text);t>=0?teamTable.row(t,{order:"index"}).data(a):teamTable.row.add(a)}function saveTeam(e,a,t){var s=[];$.each($("#teamTargetsTable").DataTable().rows().data(),(function(e,a){s.push(t.find((e=>e.id==a[1])))}));var o={type:a,teams:s};-1!==e.id?(o.id=e.id,api.item.post_teams(o).success((function(e){successFlash("Team updated successfully!"),load(),dismiss(),$("#modal").modal("hide")})).error((function(e){modalError(e.responseJSON.message)}))):modalError("Team doesn`t exist!")}function updateItemTeamsAssignment(e,a,t){if(setupTeamOptions(),$("#modalSubmitTeam").unbind("click").click((function(){saveTeam(e,a,t)})),teamTable=$("#teamTargetsTable").DataTable({destroy:!0,columnDefs:[{orderable:!1,teams:"no-sort"}]}),teamTable.clear(),teamRows=[],0===e.teams.length)return modalError("No teams assigned!"),!1;$.each(e.teams,(function(e,a){teamRows.push([escapeHtml(a.name),escapeHtml(a.id),'<span style="cursor:pointer;"><i class="fa fa-trash-o"></i></span>'])})),teamTable.rows.add(teamRows).draw()}$(document).ready((function(){$("#teamTargetForm").submit((function(){var e=document.getElementById("teamTargetForm");if(e.checkValidity())return addTeam($("#team").select2("data")[0]),teamTable.draw(),$("#teamTargetForm>div>input").val(""),!1;e.reportValidity()})),$("#teamTargetsTable").on("click","span>i.fa-trash-o",(function(){teamTable.row($(this).parents("tr")).remove().draw()}))}));